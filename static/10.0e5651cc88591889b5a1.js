(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{ZDbn:function(t,e,n){"use strict";n.r(e),n.d(e,"TexteditorModule",(function(){return K}));var o=n("ofXK"),i=n("tyNb"),s=n("fXoL"),r=n("bg2f"),a=n("lGQG");let c=(()=>{class t{constructor(t){this.auth=t,this.newAssistant='<tr class="instru"><td class="num-asis" style="text-align: center;"></td><td colspan="2"><span class="full-name" style="text-indent: 0.34em;"></span></td><td><span class="id-instru" style="margin-left: 0.58em;"></span></td><td class="bonding-type" style="text-align: center;"></td><td class="bonding-type" style="text-align: center;"></td><td class="company-depen" colspan="2"></td><td colspan="2"><span class="mail-instru" style="text-indent: 0.60em;"></span></td><td style="text-align: center;"><span class="phone-ext" style="text-indent: 0.01em;"></span></td><td><br></td></tr>',this.headerKeys=["num-act","name-meet","city-date","start-time","end-time","place","reg-cent","topic","objective"],this.bodyKey="body-act",this.footerKeys=["activity","respo","date-act","obser","reg-asis","objective"],this.instruKey="instru",this.assistantKeys=["num-asis","full-name","id-instru","bonding-type","company-depen","mail-instru","phone-ext"]}updateContent(t){this.setCurrentContent(t),this.getFrameDocument(),this.headerContent(),this.bodyContentV1(),this.footerContent(),this.listAssis()}setCurrentContent(t){this.currContent=t}getFrameDocument(){let t=document.getElementsByTagName("iframe");this.framDoc=t[0].contentDocument}headerContent(){this.accessContent(this.headerKeys,this.currContent.header)}bodyContentV1(){this.writeContent(this.bodyKey,this.currContent.body)}footerContent(){this.accessContent(this.footerKeys,this.currContent.footer)}listAssis(){let t,e,n,o,i,s,r,a;for(t=this.currContent.footer.list_asis,e=t.length,s=this.addAssistant(t.length),r=this.framDoc.getElementsByTagName("tr"),a=r.length,r[a-1].insertAdjacentHTML("afterEnd",s),r[a-e].remove(),o=this.framDoc.getElementsByClassName(this.instruKey),i=o.length,n=0;n<i;n++)this.accessContent(this.assistantKeys,t[n])}addAssistant(t){return 1==t?this.newAssistant:this.newAssistant.repeat(t)}accessContent(t,e){let n,o,i,s,r;for(n=t.length,i=0;i<n;i++)s=t[i],o=s.search("-"),o>0?(r=s.replace("-","_"),this.writeContent(s,e[r])):this.writeContent(s,e[s])}writeContent(t,e){let n,o,i;if(n=this.framDoc.getElementsByClassName(t),o=n.length,1==o)n[0].innerHTML=e;else if(0==o)console.log("not found");else for(i=0;i<o;i++)n[i].innerHTML=e}getAct(t){return this.act={t:t.template,c:t.u},this.act}}return t.\u0275fac=function(e){return new(e||t)(s.Ub(a.a))},t.\u0275prov=s.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n("3Pt+");function l(t,e){}const h=()=>{const t="undefined"!=typeof window?window:void 0;return t&&t.tinymce?t.tinymce:null};let u=(()=>{class t{constructor(){this.onBeforePaste=new s.o,this.onBlur=new s.o,this.onClick=new s.o,this.onContextMenu=new s.o,this.onCopy=new s.o,this.onCut=new s.o,this.onDblclick=new s.o,this.onDrag=new s.o,this.onDragDrop=new s.o,this.onDragEnd=new s.o,this.onDragGesture=new s.o,this.onDragOver=new s.o,this.onDrop=new s.o,this.onFocus=new s.o,this.onFocusIn=new s.o,this.onFocusOut=new s.o,this.onKeyDown=new s.o,this.onKeyPress=new s.o,this.onKeyUp=new s.o,this.onMouseDown=new s.o,this.onMouseEnter=new s.o,this.onMouseLeave=new s.o,this.onMouseMove=new s.o,this.onMouseOut=new s.o,this.onMouseOver=new s.o,this.onMouseUp=new s.o,this.onPaste=new s.o,this.onSelectionChange=new s.o,this.onActivate=new s.o,this.onAddUndo=new s.o,this.onBeforeAddUndo=new s.o,this.onBeforeExecCommand=new s.o,this.onBeforeGetContent=new s.o,this.onBeforeRenderUI=new s.o,this.onBeforeSetContent=new s.o,this.onChange=new s.o,this.onClearUndos=new s.o,this.onDeactivate=new s.o,this.onDirty=new s.o,this.onExecCommand=new s.o,this.onGetContent=new s.o,this.onHide=new s.o,this.onInit=new s.o,this.onInitNgModel=new s.o,this.onLoadContent=new s.o,this.onNodeChange=new s.o,this.onPostProcess=new s.o,this.onPostRender=new s.o,this.onPreInit=new s.o,this.onPreProcess=new s.o,this.onProgressState=new s.o,this.onRedo=new s.o,this.onRemove=new s.o,this.onReset=new s.o,this.onSaveContent=new s.o,this.onSetAttrib=new s.o,this.onObjectResizeStart=new s.o,this.onObjectResized=new s.o,this.onObjectSelected=new s.o,this.onSetContent=new s.o,this.onShow=new s.o,this.onSubmit=new s.o,this.onUndo=new s.o,this.onVisualAid=new s.o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=s.Ib({type:t,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),t})();const g=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],b=(t,e)=>"string"==typeof t?t.split(",").map(t=>t.trim()):Array.isArray(t)?t:e;let m=0;const p=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return m++,t+"_"+n+m+String(e)},C=t=>void 0!==t&&"textarea"===t.tagName.toLowerCase(),f=t=>void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" "),w=()=>{},y=t=>null==t,v=()=>({listeners:[],scriptId:p("tiny-script"),scriptLoaded:!1}),P=(()=>{let t=v();return{load:(e,n,o)=>{t.scriptLoaded?o():(t.listeners.push(o),e.getElementById(t.scriptId)||((e,n,o,i)=>{const s=n.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=e,s.src=o;const r=()=>{s.removeEventListener("load",r),t.listeners.forEach(t=>t()),t.scriptLoaded=!0};s.addEventListener("load",r),n.head&&n.head.appendChild(s)})(t.scriptId,e,n))},reinitialize:()=>{t=v()}}})(),D=new s.r("TINYMCE_SCRIPT_SRC"),M={provide:d.f,useExisting:Object(s.W)(()=>_),multi:!0};let _=(()=>{class t extends u{constructor(t,e,n,o){super(),this.platformId=n,this.tinymceScriptSrc=o,this.cloudChannel="5",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=w,this.onChangeCallback=w,this._elementRef=t,this.ngZone=e,this.initialise=this.initialise.bind(this)}set disabled(t){this._disabled=t,this._editor&&this._editor.initialized&&this._editor.setMode(t?"readonly":"design")}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent(y(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this._editor?this._editor.setMode(t?"readonly":"design"):t&&(this.init=Object.assign(Object.assign({},this.init),{readonly:!0}))}ngAfterViewInit(){Object(o.n)(this.platformId)&&(this.id=this.id||p("tiny-angular"),this.inline=void 0!==this.inline?"boolean"!=typeof this.inline||this.inline:this.init&&this.init.inline,this.createElement(),null!==h()?this.initialise():this._element&&this._element.ownerDocument&&P.load(this._element.ownerDocument,this.getScriptSrc(),this.initialise))}ngOnDestroy(){null!==h()&&h().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(this._element.id=this.id,C(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}initialise(){const t=Object.assign(Object.assign({},this.init),{target:this._element,inline:this.inline,readonly:this.disabled,plugins:(e=this.init&&this.init.plugins,n=this.plugins,f(e).concat(f(n))),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:t=>{this._editor=t,t.on("init",e=>{this.initEditor(t)}),((t,e)=>{(t=>{const e=b(t.ignoreEvents,[]);return b(t.allowedEvents,g).filter(t=>g.includes(t)&&!e.includes(t))})(t).forEach(n=>{const o=t[n];e.on(n.substring(2),n=>t.ngZone.run(()=>o.emit({event:n,editor:e})))})})(this,t),this.init&&"function"==typeof this.init.setup&&this.init.setup(t)}});var e,n;C(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{h().init(t)})}getScriptSrc(){return y(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){t.on("blur",()=>this.ngZone.run(()=>this.onTouchedCallback())),t.on(this.modelEvents,()=>{this.ngZone.run(()=>this.onChangeCallback(t.getContent({format:this.outputFormat})))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.onChangeCallback(t.getContent({format:this.outputFormat})),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(s.m),s.Nb(s.C),s.Nb(s.F),s.Nb(D,8))},t.\u0275cmp=s.Hb({type:t,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",id:"id",modelEvents:"modelEvents",disabled:"disabled",initialValue:"initialValue",init:"init",inline:"inline",outputFormat:"outputFormat",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents"},features:[s.Bb([M]),s.zb],decls:1,vars:0,template:function(t,e){1&t&&s.nc(0,l,0,0,"ng-template")},styles:["[_nghost-%COMP%] { display: block; }"]}),t})(),S=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[o.c,d.e]]}),t})();function E(t,e){if(1&t&&(s.Qb(0,"th",11),s.oc(1),s.Pb()),2&t){const t=e.$implicit;s.Cb(1),s.qc(" ",t," ")}}function O(t,e){if(1&t){const t=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td",11),s.oc(2),s.Pb(),s.Qb(3,"td",11),s.oc(4),s.Pb(),s.Qb(5,"td",11),s.oc(6),s.Pb(),s.Qb(7,"td",11),s.Qb(8,"button",12),s.Xb("click",(function(){s.ic(t);const n=e.$implicit;return s.Zb(3).getDocById(n)})),s.oc(9,"Editar"),s.Pb(),s.Pb(),s.Ob(10,"td"),s.Pb()}if(2&t){const t=e.$implicit,n=e.index;s.Cb(2),s.pc(n),s.Cb(2),s.pc(t._id),s.Cb(2),s.pc(t.document_u)}}function I(t,e){if(1&t&&(s.Qb(0,"table"),s.Qb(1,"tr"),s.nc(2,E,2,1,"th",9),s.Pb(),s.nc(3,O,11,3,"tr",10),s.Pb()),2&t){const t=s.Zb(2);s.Cb(2),s.ec("ngForOf",t.header_list),s.Cb(1),s.ec("ngForOf",t.rows)}}const A=function(){return["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"]},B=function(t){return{height:500,menubar:!1,plugins:t,toolbar:"undo redo | formatselect | bold italic backcolor | \n      alignleft aligncenter alignright alignjustify | \n      bullist numlist outdent indent | removeformat | help"}};function R(t,e){if(1&t){const t=s.Rb();s.Qb(0,"div",6),s.Qb(1,"editor",7),s.Xb("onSelectionChange",(function(e){return s.ic(t),s.Zb().editorContent(e)})),s.Pb(),s.Qb(2,"div"),s.nc(3,I,4,2,"table",8),s.Pb(),s.Pb()}if(2&t){const t=s.Zb();s.Cb(1),s.ec("init",s.gc(3,B,s.fc(2,A))),s.Cb(2),s.ec("ngIf",t.table_state)}}const x=[{path:"",component:(()=>{class t{constructor(t,e,n){this.rs=t,this.auth=e,this.dt=n,this.myEditor="",this.url_doc="https://sac-ddev.herokuapp.com/document",this.header_list=["index","_id","document_u","get_doc"],this.rows=[],this.table_state=!1}ngOnInit(){this.verifyEdit()}verifyEdit(){try{tinymce.activeEditor.initialized&&this.getDocById(this.auth.getCurrentAct())}catch(t){setTimeout(()=>{this.verifyEdit()},2e3)}}editorContent(t){this.myEditor=t}insertHtml(t){tinymce.execCommand("mceInsertContent",!1,t)}createDoc(){let t={document_u:this.auth.getCurrentUser(),format_id:1};this.rs.postRequest(this.url_doc,t).subscribe(t=>{this.insertHtml(t.format.template),this.auth.setCurrentAct(t.format.id_acta)})}getDocById(t){this.rs.getRequest(this.url_doc,t).subscribe(t=>{let e=this.dt.getAct(t);this.insertHtml(e.t),e.c&&this.dt.updateContent(e.c)})}saveDoc(){let t=this.myEditor.editor.contentDocument.documentElement.innerHTML,e=this.auth.getCurrentAct(),n=this.auth.getCurrentUser();this.rs.putRequest(this.url_doc,{id_acta:e,document_u:n,content:t}).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(s.Nb(r.a),s.Nb(a.a),s.Nb(c))},t.\u0275cmp=s.Hb({type:t,selectors:[["app-texteditor"]],decls:11,vars:3,consts:[[1,"menu-container","row"],[1,"menu-doc","col","s1"],[1,"row"],[1,"col","s12"],[1,"menu-button-doc","btn","waves-effect","waves-light","orange-sac",3,"click"],["class","col s11 editor-container",4,"ngIf"],[1,"col","s11","editor-container"],["apiKey","6o8br645ls443y35hyve8zrpx9lfo9zqpvfca8ig4cz65ac7","id","text-editor",3,"init","onSelectionChange"],[4,"ngIf"],["class","center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"center"],[1,"menu-button-editor","btn","waves-effect","waves-light","orange-sac",3,"click"]],template:function(t,e){1&t&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"ul",2),s.Qb(3,"li",3),s.Qb(4,"button",4),s.Xb("click",(function(){return e.createDoc()})),s.oc(5,"Crear"),s.Pb(),s.Pb(),s.Qb(6,"li",3),s.Qb(7,"button",4),s.Xb("click",(function(){return e.saveDoc()})),s.oc(8,"Guardar"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.nc(9,R,4,5,"div",5),s.ac(10,"async"),s.Pb()),2&t&&(s.Cb(9),s.ec("ngIf",s.bc(10,1,e.auth.isLoggedIn())))},directives:[o.j,_,o.i],pipes:[o.b],styles:[".menu-container[_ngcontent-%COMP%]{background-color:#f0f2f5;margin:0}.menu-doc[_ngcontent-%COMP%]{float:left;width:auto;height:auto}.menu-button-doc[_ngcontent-%COMP%]{width:100%;margin:1% 0;padding:0}.menu-button-editor[_ngcontent-%COMP%]{width:auto;margin:1%}.center[_ngcontent-%COMP%]{text-align:center}.editor-container[_ngcontent-%COMP%]{padding:0;margin:0}.orange-sac[_ngcontent-%COMP%]{background-color:#fc7323}.blue-sac[_ngcontent-%COMP%]{background-color:#001935}#text-editor[_ngcontent-%COMP%]{margin:0 1%;width:auto;height:auto}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[i.d.forChild(x)],i.d]}),t})(),K=(()=>{class t{}return t.\u0275mod=s.Lb({type:t}),t.\u0275inj=s.Kb({factory:function(e){return new(e||t)},imports:[[o.c,k,S]]}),t})()}}]);